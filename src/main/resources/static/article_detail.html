<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>极客星辰个人博客</title>
	<style type="text/css">
		.content{width:80%;margin:5px auto;}
		.hide_box{z-index:999;filter:alpha(opacity=50);background:#666;opacity: 0.5;-moz-opacity: 0.5;left:0;top:0;height:99%;width:100%;position:fixed;display:none;}
		.shang_box{width:540px;height:540px;padding:10px;background-color:#fff;border-radius:10px;position:fixed;z-index:1000;left:50%;top:50%;margin-left:-280px;margin-top:-280px;border:1px dotted #dedede;display:none;}
		.shang_box img{border:none;border-width:0;}
		.dashang{display:block;width:100px;margin:5px auto;height:36px;line-height:36px;padding:1px;background-color:#E74851;color:#fff;text-align:center;text-decoration:none;border-radius:10px;font-weight:bold;font-size:16px;transition: all 0.3s;}
		.dashang:hover{opacity:0.8;padding:15px;font-size:18px;}
		.shang_close{float:right;display:inline-block;}
		.shang_logo{display:block;text-align:center;margin:20px auto;}
		.shang_tit{width: 100%;height: 75px;text-align: center;line-height: 66px;color: #a3a3a3;font-size: 16px;background: url('/rewardimg/cy-reward-title-bg.jpg');font-family: 'Microsoft YaHei';margin-top: 7px;margin-right:2px;}
		.shang_tit p{color:#a3a3a3;text-align:center;font-size:16px;}
		.shang_payimg{width:160px;padding:2px;border:6px solid #EA5F00;margin:0 auto;border-radius:3px;height:160px;}
		.shang_payimg img{display:block;text-align:center;width:145px;height:145px; }
		.pay_explain{text-align:center;margin:10px auto;font-size:12px;color:#545454;}
		.radiobox{width: 16px;height: 16px;background: url('/rewardimg/radio2.jpg');display: block;float: left;margin-top: 5px;margin-right: 14px;}
		.checked .radiobox{background:url('/rewardimg/radio1.jpg');}
		.shang_payselect{text-align:center;margin:0 auto;margin-top:40px;cursor:pointer;height:60px;width:280px;}
		.shang_payselect .pay_item{display:inline-block;margin-right:10px;float:left;}
		.shang_info{clear:both;}
		.shang_info p,.shang_info a{color:#C3C3C3;text-align:center;font-size:12px;text-decoration:none;line-height:2em;}
		.div-rewardwrap{height: 60px;padding:5px !important; }
	</style>
</head>

<!--<link href="//cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">-->
<link href="/plugin/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/common.css"/>
<link rel="stylesheet" type="text/css" href="/css/article_detail.css"/>
<link href="/logo.ico" rel="shortcut icon"/>
<!--<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
<script src="/plugin/jquery.min.js"></script>
<script src="/plugin/bootstrap/js/bootstrap.min.js"></script>
<script src="/layui/layui.all.js"></script>

<!--<script type="text/javascript" src="plugin/jquery.page.js"></script>-->
<script src="/js/common.js"></script>
<!--<script src="js/snowy.js"></script>-->


<body>
	<div class="w_header">
		<div class="container">
			<div class="w_header_top">
				<a href="#" class="w_logo"></a>
				<span class="w_header_nav">
					<ul>
						<li><a href="/index.html">首页</a></li>
						<li><a href="/about.html" >关于</a></li>
						<li><a href="/article.html" class="active">成长</a></li>
						<li><a href="/editor.html">学习</a></li>
						<li><a href="">娱乐</a></li>
						<li><a href="/moodList.html">说说</a></li>
						<li><a href="/comment.html">留言</a></li>
					</ul>
				</span>
				<div class="w_search">
					<div class="w_searchbox">
						<input type="text" placeholder="search" />
						<button>搜索</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="w_container">
		<div class="container">
			<div class="row w_main_row">
				
				<ol class="breadcrumb w_breadcrumb">
				  <li><a href="/index.html">首页</a></li>
				  <li><a href="/article.html">文章</a></li>
				  <li class="active nav-articletitle">文章标题喃?</li>
				  <span class="w_navbar_tip">我们长路漫漫，只因学无止境。</span>
				</ol>
				
				<div class="col-lg-9 col-md-9 w_main_left">
					<div class="panel panel-default">
						<div class="panel-body">
							<h2 class="c_titile h2-articletitle">文章标题喃?</h2>
							<p class="box_c"><span class="d_time span-publishtime">发布时间喃?</span><span class="span-editor">编辑：<a class="a-editor" href="/about.html">作者喃?</a></span><span class="span-readingnum">阅读量喃?</span></p>
							<ul class="infos">
								<div class="div-articlecontent"></div>
								<!--<p class="p-articlecontent"></p>-->
								<p>&nbsp;</p><p align="center" class="pageLink"></p>
							</ul>
															
							<div class="keybq">
						    	<p><span>关键字</span>：<a class="label label-default">个人博客</a></p>
						    </div>
							
							
							
							<div class="nextinfo">
								<p class="last"></p>
								<p class="next"></p>
						    </div>
							
						</div>
					</div>
					
					<div class="panel panel-default">
						<div class="panel-body div-rewardwrap">

							<!--<button class="btn-reward" value="打赏"></button>-->

							<div class="content">
								<p><a href="javascript:void(0)" onClick="dashangToggle()" class="dashang" title="打赏，支持一下">打赏</a></p>
								<div class="hide_box"></div>
								<div class="shang_box">
									<a class="shang_close" href="javascript:void(0)" onClick="dashangToggle()" title="关闭"><img src="/rewardimg/close.jpg" alt="取消" /></a>
									<img class="shang_logo" src="/rewardimg/logos.png" alt="极客星辰" />
									<div class="shang_tit">
										<p>感谢您的支持，我会继续努力的!</p>
									</div>
									<div class="shang_payimg">
										<img src="/rewardimg/alipayimg.jpg" alt="扫码支持" title="扫一扫" />
									</div>
									<div class="pay_explain">扫码打赏，你说多少就多少</div>
									<div class="shang_payselect">
										<div class="pay_item checked" data-id="alipay">
											<span class="radiobox"></span>
											<span class="pay_logo"><img src="/rewardimg/alipay.jpg" alt="支付宝" /></span>
										</div>
										<div class="pay_item" data-id="weipay">
											<span class="radiobox"></span>
											<span class="pay_logo"><img src="/rewardimg/wechat.jpg" alt="微信" /></span>
										</div>
									</div>
									<div class="shang_info">
										<p>打开<span id="shang_pay_txt">支付宝</span>扫一扫，即可进行扫码打赏哦</p>

									</div>
								</div>
							</div>
							<script type="text/javascript">
								$(function(){
									$(".pay_item").click(function(){
										$(this).addClass('checked').siblings('.pay_item').removeClass('checked');
										var dataid=$(this).attr('data-id');
										$(".shang_payimg img").attr("src","/rewardimg/"+dataid+"img.jpg");
										$("#shang_pay_txt").text(dataid=="alipay"?"支付宝":"微信");
									});
								});
								function dashangToggle(){
									$(".hide_box").fadeToggle();
									$(".shang_box").fadeToggle();
								}
							</script>


							
							<!--PC版-->
							<!--<div id="SOHUCS" sid="5eab7e4c363e4cb8bed0efa3604e6b42"></div>
							<script charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/changyan.js" ></script>
							<script type="text/javascript">
							window.changyan.api.config({
							appid: 'cysPwLFm1',
							conf: 'prod_6c6350e206c502f569b865b4bf121e60'
							});
							</script>-->
							<!-- 多说评论框 start -->
								<div class="ds-thread" data-thread-key="testarticle" data-title="我的个人博客之——腾讯云空间选择" data-url="#"></div>
							<!-- 多说评论框 end -->
							<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
						<!--	<script type="text/javascript">
							var duoshuoQuery = {short_name:"wfyvv"};
								(function() {
									var ds = document.createElement('script');
									ds.type = 'text/javascript';ds.async = true;
									ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
									ds.charset = 'UTF-8';
									(document.getElementsByTagName('head')[0] 
									 || document.getElementsByTagName('body')[0]).appendChild(ds);
								})();
								</script>-->
							<!-- 多说公共JS代码 end -->
							
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-3 w_main_right">
					
					<div class="panel panel-default">
					  <div class="panel-heading">
					    <h3 class="panel-title">最新发布</h3>
					  </div>
					  <div class="panel-body">
					    	<ul class="list-unstyled sidebar newpublish-ul">
								<!--<li><a href="/post/04928311">排序算法之冒泡排序 － java实现</a></li>-->
						</ul>
					  </div>
					</div>
					
					<div class="panel panel-default">
					  <div class="panel-heading">
					    <h3 class="panel-title">友情链接</h3>
					  </div>
					  <div class="panel-body">
					    <div class="newContent">
					    	<ul class="list-unstyled sidebar shiplink">				
								<li><a href="https://www.baidu.com/" target="_blank">百度</a></li>
								<li><a href="https://www.oschina.net/" target="_blank">开源中国</a></li>							
								<li><a href="http://www.ulewo.com/" target="_blank">有乐网</a></li>							
								<li><a href="http://www.sina.com.cn/" target="_blank">新浪网</a></li>							
								<li><a href="http://www.qq.com/" target="_blank">腾讯网</a></li>							
							</ul>
					    </div>
					  </div>
					</div>
				</div>
			
			
			</div>
		</div>
	</div>
	<div class="w_foot">
		<!--<div class="w_foot_copyright">© 2015~2016 版权所有 | <a target="_blank" href="http://www.miitbeian.gov.cn/" rel="nofollow">京ICP备15010892号-1</a></div>-->
		<div class="w_foot_copyright">Copyright © 2017-2020, www.cggeeker.cn. All Rights Reserved. </div>
	</div>
	<!--toTop-->
	<div id="shape">
		<div class="shapeColor">
			<div class="shapeFly">
			</div>
		</div>
	</div>
	<!--snow-->
	<!--<div class="snow-container"></div>-->

	<script type="text/javascript">

		$(function () {

			<!--获取指定范围内的文章信息(其实只获取文章标题)的ajax-->
			$.ajax({
				type: "GET",
				url: "/article/findAllArticle",
				data: {
					"startIndex": 0,
					"pageSize": 10
				},
				dataType: "json",
				success : function (result) {
					if(result.status == 200){

						var articlearr = result.data;

						//jquery动态拼接li标签
						for(let i in articlearr){

							//动态拼接首页右边的简单的最新发布列表子元素
							/*$('.newpublish-ul').append('<li><a href="/article_detail.html">'+articlearr[i].title+'</a></li>');*/
                            $('.newpublish-ul').append('<li><a class="article-a-getid" href="/article_detail.html?articleId='+articlearr[i].articleId+'" articleid="'+articlearr[i].articleId+'" readingnum="'+articlearr[i].readingNum+'">'+articlearr[i].title+'</a></li>');

                        }

					}else{}
				},
				fail : function () {
					console.log("fail!")
				},
				error : function () {
					console.log("error!")
				}
			});



            //为解决jquery动态生成节点造成节点点击事件失效，这里我们采用js的事件委托机制处理
            $(document).on("click",".article-a-getid",function(){
                var readingnum = $(this).attr("readingnum"); //JQuery通过click事件获取当前点击对象的非固定属性
                var articleid = $(this).attr("articleid");  //这里没有到，阅读量+1 的动作可以在前台处理，也可以在数据库处理
                /* alert("点击a标签阅读量："+readingnum+"文章id："+articleid);
                 console.log("点击a标签阅读量："+readingnum);*/

                //这是一个点击a标签后将阅读量+1 的ajax的post请求
                $.post("/article/updateTheArticleReadingNum", {
                        "articleId" : articleid,
                        "newAddNum" : 1},
                    function (result) {
                        console.log("阅读量+1成功！");
                    });

            });


			//JS获取上一个页面传入的参数
			function GetQueryString(articleId) {
				var reg = new RegExp("(^|&)" + articleId + "=([^&]*)(&|$)","i");
				var r = window.location.search.substr(1).match(reg);
				if (r!=null) return (r[2]);
				return null;
			}

			var articleId = GetQueryString("articleId");
			if(articleId!=null) {
				var Id = decodeURIComponent(articleId);
				console.log("articleId:"+Id);
			}

			//通过这个ajax我们根据上一页面传进的articleId查询article(文章)信息
			$.ajax({
				type : "GET",
				url : "/article/findOneArticleById",
				data : {
					"articleId" : articleId
				},
				dataType : "json",
				success : function (result) {
					if(result.status == 200){
						var publishTime = layui.util.toDateString(result.data.publishTime, 'yyyy-MM-dd HH:mm:ss')//时间戳->常规时间格式
						$('.nav-articletitle').text(result.data.title);
						$('.h2-articletitle').text(result.data.title);
						$('.span-publishtime').text("发布时间:"+publishTime);
						$('.a-editor').text(result.data.author);
						$('.span-readingnum').text("阅读量("+result.data.readingNum+")");
						$('.div-articlecontent').html(result.data.content);

					}
					else if(result.status == 500){
						console.log("根据articleId查询文章信息为空！");
					}
				},
				fail : function () {
					console.log("根据articleId查询文章信息失败！");
				},
				error : function () {
					console.log("根据articleId查询文章信息错误！");
				}

			});


			//通过这个ajax我们根据上一页面传进的articleId查询article(文章)的上一篇文章的信息并填充上一篇连接数据
			$.ajax({
				type : "GET",
				url : "/article/findOneArticleById",
				data : {
					"articleId" : parseInt(articleId)+1
				},
				dataType : "json",
				success : function (result) {
					if(result.status == 200){
						$('.last').append('上一篇：'+'<a class="article-a-getid" href="article_detail.html?articleId='+result.data.articleId+'"' +
								' articleid="'+result.data.articleId+'" readingnum="'+result.data.readingNum+'">'+result.data.title+'</a>')
					}
					else if(result.status == 500){
						console.log("根据articleId查询文章信息为空！");
					}
				},
				fail : function () {
					console.log("根据articleId查询文章信息失败！");
				},
				error : function () {
					console.log("根据articleId查询文章信息错误！");
				}

			});

			//通过这个ajax我们根据上一页面传进的articleId查询article(文章)的下一篇文章的信息并填充下一篇连接数据
			$.ajax({
				type : "GET",
				url : "/article/findOneArticleById",
				data : {
					"articleId" : parseInt(articleId)-1
				},
				dataType : "json",
				success : function (result) {
					if(result.status == 200){
						$('.next').append('下一篇：'+'<a class="article-a-getid" href="article_detail.html?articleId='+result.data.articleId+'"' +
								' articleid="'+result.data.articleId+'" readingnum="'+result.data.readingNum+'">'+result.data.title+'</a>')
					}
					else if(result.status == 500){
						console.log("根据articleId查询文章信息为空！");
					}
				},
				fail : function () {
					console.log("根据articleId查询文章信息失败！");
				},
				error : function () {
					console.log("根据articleId查询文章信息错误！");
				}

			});







		});

	</script>

</body>
</html>